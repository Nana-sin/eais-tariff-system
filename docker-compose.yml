version: '3.9'

  services:
    backend:
      build:
        context: ./backend
        dockerfile: Dockerfile.dev
      container_name: eais-backend-dev
      ports:
        - "8000:8000"
      volumes:
        - ./backend/app:/app/app
        - ./lifts.xlsx:/app/lifts.xlsx
        - ./parfums.xlsx:/app/parfums.xlsx
        - ./bancomats.xlsx:/app/bancomats.xlsx
      environment:
        - ENVIRONMENT=development
        - ALLOWED_ORIGINS=http://localhost:5173,http://localhost:8080
      networks:
        - eais-network
      healthcheck:
        test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
        interval: 30s
        timeout: 10s
        retries: 3
        start_period: 40s

    frontend:
      build:
        context: ./frontend
        dockerfile: Dockerfile.dev
      container_name: eais-frontend-dev
      ports:
        - "5173:5173"
      volumes:
        - ./frontend:/app
        - /app/node_modules
      environment:
        - VITE_API_URL=http://localhost:8000
      depends_on:
        - backend
      networks:
        - eais-network
   networks:
    eais-network:
      driver: bridge
